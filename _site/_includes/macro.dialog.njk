{#-
  id: string
  title: string
  slot: string (md support)
  action: string
  props: string (great for stuff like alpine or aria attrs)
-#}
{%- from 'macro.btn.njk' import btn -%}

{%- macro dialog(param) -%}

{%- set classes -%}
dialog
m-0
p-0
w-full
max-w-none
h-full
max-h-none
min-h-screen
bg-transparent
text-[inherit]
invisible
grid
items-end
justify-items-center
fixed
inset-0
pointer-events-none
overflow-y-hidden
[overscroll-behavior:contain]
opacity-0
motion-safe:(transition-all)
[&[open]]:(pointer-events-auto visible opacity-100)
[&[open]_.dialog-box]:(translate-y-0 scale-100)
[&::backdrop]:(bg-black/70 backdrop-blur-sm)
md:items-center
{%- endset -%}

{%- set action -%}{{ param.action if param.action else 'Close' }}{%- endset -%}

<template x-teleport="body">
  <dialog id="{{ param.id if param.id else 'dialog' }}" class="{{ classes }}"{{ param.props | safe }}>
    <div class="dialog-box my-6 p-6 w-11/12 max-w-lg max-h-[calc(100vh-5em)] bg-zinc-800 col-start-1 row-start-1 overflow-y-auto [overscroll-behavior:contain] translate-y-3 rounded-xl shadow-2xl scale-90 motion-safe:(transition-all)">
      <form method="dialog" class="absolute top-3 right-3">{{ btn({ tag: 'button', title: 'Close', ico: 'mdi:close' }) }}</form>
      {%- if param.title %}<h3 class="mb-6 text-(white 3xl) leading-none font-goblin flex items-end gap-4 [&>small]:(text-base leading-tight opacity-70)">{{ param.title | safe }}</h3>{%- endif %}
      <div>{{ param.slot | md | safe }}</div>
    </div>
    <form method="dialog" class="text-transparent grid col-start-1 row-start-1 self-stretch justify-self-stretch fixed inset-0 -z-[1]">
      <button>Close</button>
    </form>
  </dialog>
</template>

{%- endmacro -%}
